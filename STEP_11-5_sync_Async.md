STEP 11-5

# 2. Sync/Async  학습내용 정리



데이터를 처리하는 방식의 차이에 따라 동기와 비동기로 나눈다. 

iOS나 iOS의 view Controller 뿐만 아니라 OS, Network, Web 등 일반적인 컴퓨터 프로그래밍에서 범용적으로 사용하는 개념이다.



## 1. Synchronous

- 요청과 그 결과가 동시에 일어난다. 
- 즉, 요청에 대해 처리시간이 얼마나 걸리든지 요청한 장소에 결과를 주어지는 방식이다.
- 노드 간의 작업 처리단위(transaction) 를 동시에 맞춘다.



- 예시) 계좌 이체
  - A의 계좌에서  B의 계좌로 계좌이체를 실시한다고 생각해보자.
  - A의 계좌에서 먼저 잔고확인 후, A의 계좌 잔고는 **1) -50,000 으로 갱신할 예정의 상태**에 놓인다.
  - **2) A의 계좌에서 B의 계좌로 50,000을 전송**하면 B의 계좌는 이 정보를 수신한다. **(request)**
  - **3) B가 성공적으로 50,000을 받았음을 알리는 정보를  A의 계좌를 담당하는 은행에 전달**한다. **(response)**
  - **4) A의 계좌가 기존잔고-50,000으로 갱신**되고, **B의 계좌가 기존 잔고+50,000으로 갱신**된다.
- 정보의 순서가 중요한 경우에 쓰인다. (작업이 성공하면 같이 변경되거나, 작업이 실패시 같이 변경되지 않는다.)

- TCP/IP의 작동방식인 3-way/4-way handshaking과도 유사한 점이 있다. (나중에 비교해보자)





### Callback

- **콜백은 다른 코드의 파라미터(매개변수, 인자)로서 넘겨주는 실행가능한 코드를 의미**한다.
  - 콜백을 넘겨받은 코드는 해당 콜백을 즉시실행하기도, 나중에 실행(event 발생 시점 등)하기도 한다.
- **콜백 함수** 는 **다른 함수의 매개변수로 호출될 함수**를 의미한다. 
  - ex) 이벤트 리스너 함수에 대한 콜백으로 정의한 **이벤트 핸들러 함수는 콜백함수**이다.



## Asynchronous

- 요청과 결과가 동시에 일어나지 않는다.
- 요청에 대해 처리한 결과를 그 자리에 주지 않는다. (기다리지도 않는다.)
- 작업을 수행하는 대상 따로, 그 **수행한 결과를 받아서 처리하는 대상도 각각 다르게 할 수 있다**. 
  - 작업 수행한 결과를 **작업 호출대상이 아닌 다른 어딘가에게로 처리하게 만들기 위해** Callback함수를 쓴다.
  - **콜백 함수**는  비동기 방식에서 **어떤 수행이 완료되었을 때( event가 발생했을 때 ) 수행해야 할 함수**를 포함한다.

- 노드 간의 작업 처리단위(transaction) 를 동시에 맞추지 않아도 된다.



- 예시) 시험 기간의 대학생과 교수

  - 일괄적으로 시험 시작해서 일괄적으로 마치는 일반적인 중/고교 시험보다는

  ​       시험지를 받는 순서대로 풀고, 제출을 자율에 맡기는 시험을 가정한다. 

  - 아래 예시는 시험지를 풀어서 제출하는 경우나 채점한 시험지를 건내는 경우 모두 비동기 처리를 가정

  

  - 0) 교수가 시험지를 건낸다. **(request1)**
  - 1) 학생은 시험문제를 푼다.
  - 2) 시험문제를 푼 학생은 각자 문제를 다 푸는 대로 교수에게 시험지를 제출한다 **(response1/request2)**
  - 3) 교수는 조교와 함께 학생의 시험지를 채점한다. 
  - 4) 채점이 끝난 시험지부터 학생에게 전송한다 
  - 5) 학생은 시험 결과를 확인한다. **(response2)**

- 학생과 교수/조교가 시험지에 행하는 목적은 서로 다르다. (문제풀기/채점하기)

- request1과 response1의 순서가 같지 않을 수 있다. 

- 따라서 **둘의 작업 처리 시간은 일치하지 않고, 일치하지 않아도 된다.** (교수는 그 자리에서 채점 후 전송해도 되고, 일부 학생의 시험지는 연구실로 돌아가 채점해도 된다. )



# 부연설명

[출처 : Synchronous(동기) Vs Asynchronous(비동기)](https://nesoy.github.io/articles/2017-01/Synchronized)

- Synchronous & Asynchronous은 결과물을 돌려받는 시점에 초점을 두면 좀 더 쉽게 이해를 할 수 있다.
- Synchronous는 호출한 작업처리 메서드의 처리가 끝날때 까지 기다렸다가 **결과물을 메서드 호출시점(과 위치)으로** 돌려준다.
- Asynchronous는 작업처리 메서드의 **완료가 되지 않아도 기다리지 않고 다음작업을 수행**하며, **나중에 완료가되면 Callback 함수등을 통해 그 결과물을 가져온다.** 

- 또한, 비동기에서는 **함수를 호출한 쪽에서 수행 결과를 직접 처리하지 않고** **콜백 함수를 통해 수행 결과를 처리**합니다.







## Reference

[동기와 비동기의 개념과 차이 - 예제 출처](https://private.tistory.com/24)

[출처 : Synchronous(동기) Vs Asynchronous(비동기)](https://nesoy.github.io/articles/2017-01/Synchronized)

